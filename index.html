<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Rock paper scissors</title>
    </head>
    <body>
        <div>
            <button id = 'rock'>Rock</button>
            <button id = 'paper'>Paper</button>
            <button id = 'scissors'>Scissors</button>
        </div>
        <script>
let userChoice; 
let computerChoice;
let userScore = 0;
let computerScore = 0;
let i = 0;

function getComputerChoice() {
    return Math.floor(Math.random() * 3) + 1;
}

let div = document.querySelector('div');
div.addEventListener('click', playRound);

function playRound() {
    userChoice = event.target.id;

    computerChoice = getComputerChoice();
    if(computerChoice === 1) {
        computerChoice = 'rock';
    } else if(computerChoice === 2) {
        computerChoice = 'paper';
    } else if(computerChoice === 3) {
        computerChoice = 'scissors';
    }

    if(userChoice === 'rock') {
        if(computerChoice === 'rock') {
            roundResult = 'It is a tie, ';
        } else if(computerChoice === 'paper') {
            roundResult = 'You lose, ';
        } else if(computerChoice === 'scissors') {
            roundResult = 'You win, ';
        }
    } else if(userChoice === 'paper') {
        if(computerChoice === 'rock') {
            roundResult = 'You win, ';
        } else if(computerChoice === 'paper') {
            roundResult = 'It is a tie, ';
        } else if(computerChoice === 'scissors') {
            roundResult = 'You lose, ';
        }
    } else if(userChoice === 'scissors') {
        if(computerChoice === 'rock') {
            roundResult = 'You lose, ';
        } else if(computerChoice === 'paper') {
            roundResult = 'You win, ';
        } else if(computerChoice === 'scissors') {
            roundResult = 'It is a tie, ';
        }
    }

    if(roundResult === "You win, ") {
        userScore = ++userScore;
        let para = document.createElement('p');
        para.textContent = roundResult + userChoice + ' vs ' + computerChoice + '. The score is ' + userScore + '/' + computerScore;
        div.appendChild(para);
    } else if(roundResult === "It is a tie, ") {
        let para = document.createElement('p');
        para.textContent = roundResult + userChoice + ' vs ' + computerChoice + '. The score is ' + userScore + '/' + computerScore;
        div.appendChild(para);
    } else if(roundResult === "You lose, ") {
        computerScore = ++computerScore;
        let para = document.createElement('p');
        para.textContent = roundResult + userChoice + ' vs ' + computerChoice + '. The score is ' + userScore + '/' + computerScore;
        div.appendChild(para);
    }

    i++

    if (i > 4) {
        div.removeEventListener('click', playRound);

        if(userScore > computerScore) {
            let finalPara = document.createElement('p');
            finalPara.textContent = 'You win! Congratulations!';
            div.appendChild(finalPara);
        } else if (userScore < computerScore) {
            let finalPara = document.createElement('p');
            finalPara.textContent = 'You lose :( Try again.';
            div.appendChild(finalPara);
        } else if(userScore === computerScore) {
            let finalPara = document.createElement('p');
            finalPara.textContent = 'The game is a tie. Good job.';
            div.appendChild(finalPara);
        } 
    } 
}   
        </script>
    </body>
</html>